!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("Okra requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(r,e){var t={loader:null,iframe:null,baseUrl:"https://app.okra.ng",url:"",onSuccess:null,id:null,onClose:null,init:function(){var e=this;e.addOverlay(),e.setIframe(),e.listen()},buildWithShortUrl:function(e){var t=this;t.id="okra-iframe-"+Math.floor(1e4*Math.random()),t.url=t.baseUrl+"?ref="+e.short_url+"&isIframe=true&source=integration",t.onSuccess=e&&e.onSuccess,t.onClose=e&&e.onClose,t.init()},buildWithOptions:function(e){var t=this;t.id="okra-iframe-"+Math.floor(1e4*Math.random());var o={products:e.products||"",logo:e.logo||"",clientName:e.name||e.clientName||"",color:e.color||"",limit:e.limit||"",filter:e.filter||{industry_type:"all",banks:[]},isCorporate:e.isCorporate||!1,connectMessage:e.connectMessage||"",guarantors:e.guarantors&&e.guarantors||{status:!1,message:"",number:0},widget_success:e.widget_success||"",widget_failed:e.widget_failed||"",callback_url:e.callback_url||"",currency:e.currency||"",exp:e.exp||"",success_title:e.success_title||"",success_message:e.success_message||"",redirect_url:e.redirect_url||"",key:e.key||"",token:e.token||"",options:e.options||{},source:"integration"};t.url=t.baseUrl+"?&isIframe=true&withOptions=true",t.onSuccess=e&&e.onSuccess,t.onClose=e&&e.onClose,t.init(!0),t.sendObj(o)},sendObj:function(e){var t=this,o=document.getElementById(t.iframe.id);o.onload=function(){o.contentWindow.postMessage(e,t.url)}},listen:function(){var t=this,o=document.getElementById(t.iframe.id);r.addEventListener("message",function(e){e.origin.startsWith(t.baseUrl)&&(e&&e.data&&e.data.close?(r.removeEventListener("message",t.closeIframe(o)),t.onClose&&!t.iframe&&t.onClose()):e&&e.data&&e.data&&e.data.success&&(r.removeEventListener("message",t.closeIframe(o)),t.onSuccess&&!t.iframe&&t.onSuccess(e&&e.data)))})},addOverlay:function(){var e=document.createElement("div");e.id="okra-base-"+Math.floor(1e4*Math.random()),e.style.cssText="background-color: rgba(0, 0, 0, 0.9); position: fixed;width: 100%; height: 100%; top: 0; left: 0; z-index: 9999999; overflow: hidden;",this.loader=e,document.body.appendChild(e)},removeOverlay:function(){this.loader.id&&(document.querySelector("#"+this.loader.id).outerHTML="")},setIframe:function(){var e=document.createElement("iframe");e.setAttribute("frameBorder","0"),e.setAttribute("allowtransparency","true"),e.id=this.id,e.name="okra-popup-"+e.id,e.style.cssText="z-index: 9999999999999999999999;background: transparent; border: 0px none transparent;overflow-x: hidden;overflow-y: hidden;margin: 0;padding: 0;-webkit-tap-highlight-color: transparent;-webkit-touch-callout: none;position: fixed;left: 0;top: 0;width: 100%;height: 100%;",e.src=this.url,this.iframe=e,document.body.appendChild(e),this.removeOverlay()},closeIframe:function(e){var t;!e.outerHTML||(t=e.previousSibling)&&this.iframe&&(this.iframe="",t.parentElement.removeChild(e))}},o=r.Okra;return t.noConflict=function(e){return e&&r.Okra===t&&(r.Okra=o),t},void 0===e&&(r.Okra=t),t});